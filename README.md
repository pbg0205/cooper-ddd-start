# cooper-ddd-start

DDD-START 기반 코드 연습 및 학습 정리

<br>

#Chapter01. 도메인 모델 시작

## [1] 도메인
- `도메인(Domain)` : 소프트웨어로 해결하고자 하는 문제 영역
  - 도메인은 다시 하위 도메인으로 나눌 수 있다.
  - 특정 도메인을 위한 소프트웨어는 원한다면 특정 도메인 기능만 개발하고 다른 기능을 연동해서 사용할 수 있다.
  - 도메인마다 고정된 하위 도메인이 존재하는 것은 아니다. 상황에 따라 도메인 구성이 달라진다.
    - ex1) 대형 장비 판매
      - 온라인 카탈로그, 주문서 O
      - 온라인 결제, 배송 추적 필요 X
    - ex2) 의류, 악세서리
      - 카탈로그, 리뷰, 주문, 결제, 배송, 회원 기능 O

<br>

## [2] 도메인 모델
- `도메인 모델` : 특정 도메인 모델을 개념적으로 표현한 것
  - 도메인 모델을 사용하면 여러 관계자들이 동일한 **도메인을 이해하고 지식을 공유하는데 도움이 된다.**
  - 도메인을 이해하는데 도움이 된다면 표현 방식이 무엇인지는 중요하지 않다.
    - ex) 객체를 이용한 도메인 모델, 클래스 다이어그램, 상태 다이어그램
  - 도메인 모델을 이용해서 코드를 작성하기 위해서는 **구현 기술에 맞는 구현 모델이 따로 필요**하다.
  
<br>

## [3] 도메인 모델 패턴
- `표현(Presentation)` : 사용자의 요청을 처리하고 사용자에게 정보를 보여준다. 여기서 사용자는 소프트웨어를 사용하는 사람 뿐만아니라 외부 시스템도 사용자가 될 수 있다.
- `응용(Application)` : 사용자가 요청한 기능을 실행. 업무 로직을 직접 구현하지 않으며 도메인 계층과 조합해 기능을 수행
- `도메인(Domain)` : 시스템이 제공할 도메인 규칙을 구현
- `인프라스트럭처(Infrastructure)` : DB나 Message System과 같은 외부 시스템과의 연동을 처리

<br>

## [4] 엔티티와 밸류

- `엔티티(entity)` : DB 테이블과 매핑되는 핵심 객체
  - 식별자 : 엔티티를 구분하는 고유한 값 (같은 식별자는 같은 객체임을 의미)
    - 생성 방법
      1. 특정 규칙에 따라 생성
      2. UUID 사용
      3. 값을 직접 입력
      4. 일련번호 사용(sequence나 DB auto incremet 컬럼 사용)

<br>

- `밸류(value)` : 값들을 개념적으로 표현하는 객체
  - 밸류 타입 선언은 **밸류 타입을 위한 기능을 추가**할 수 있다.
  - 밸류 타입은 변경 기능을 제공하지 않는 **불변(immutable)** 으로 선언한다.
    - 불변으로 선언하지 않은 경우, 아래와 같이 값이 일관성 문제가 발생
      ```java
      Money price = new Money(1000);
      OrderLine orderLine =new OrderLine(product, price, 2);
      price.setValue(2000);
      ```

<br>

## [5] 도메인 모델에 set 메서드 넣지 않기
- setter를 사용할 경우, 도메인 규칙이 깨질 수 있다. 이 말은 즉슨, domain 외 영역에서 값을 변경해 도메인 규칙들이 외부에서 깨질 수 있다는 것을 의미한다.
- 또한 도메인 객체가 불완전한 상태로 사용될 수 있다. setter를 사용하는 것을 다른 위치에서 값을 초기화 또는 변경을 의미해 꼭 생성자를 통해 데이터를 모두 받는 방식으로 구현하자.

